"use strict";

/* @flow */
var React = require("./react");
var createElementFrom = require("./create-element-from");

var _require = require("./util");

var merge = _require.merge;

var FieldProxyMixin = require("./field-proxy-mixin");

var EachFieldProxy = React.createClass({
  displayName: "EachFieldProxy",

  mixins: [FieldProxyMixin],
  render: function render() {
    if (!this.props.form) throw new Error("no form for " + this.getName());
    var fieldProps = this.getFieldProps();

    var fieldComponent = this.props.form.fieldComponent;

    var fieldElements = fieldProps.value.map(function (value) {
      return merge;
    });

    var selfProps = {
      children: fieldElements };

    if (this.props.component) {
      return createElementFrom(this.props.component, { children: fieldElements });
    } else {
      return React.DOM.div(this.props.component, { children: fieldElements });
    }
  }
});

module.exports = EachFieldProxy;